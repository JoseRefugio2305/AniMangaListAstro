---
import CardAUpc from '../components/CardAUpc.astro';

interface Props {
	listAnimes : any
}

const {  listAnimes } = Astro.props;

---

<div class="grid md:grid-cols-2 sm:grid-cols-1 ml-3 mr-3">

{
	
	listAnimes.map((aupc:any,i:any)=>
		<CardAUpc
			index={i}
			malid= {aupc.malid}
			titulo = {aupc.titulo}
			url = {aupc.url}
			imagen = {aupc.imagen}
			season= {aupc.season}
			popularidad= {aupc.popularidad}
			
		/>
	)
}
</div>


<script type="text/javascript" is:inline>
	try {
			clearInterval(intAnimes);
			  var animes = document.getElementsByClassName('a-upc')
			  const sleep = (delay) => new Promise((resolve) => setTimeout(resolve, delay))

			const ShowAnimes = async ()=>{
				//animes[animes.length-1].classList.add("hidden")
				
				let c = 0;

				for(let i=0; i<animes.length; i++)
				{
					
					if(i<=1)
					{
						for(let i=2; i<animes.length; i++)
						{
							animes[i].classList.add("hidden")
						}
						animes[0].classList.remove("hidden")
						animes[1].classList.remove("hidden")
					}
					else if(i>1 && i<animes.length-1)
					{
						animes[i-1].classList.add("hidden")
						animes[i-2].classList.add("hidden")
						animes[i].classList.remove("hidden")
						animes[i+1].classList.remove("hidden")
					}
					else if(i==animes.length-1)
					{
						animes[i-1].classList.add("hidden")
						animes[i-2].classList.add("hidden")
						animes[i].classList.remove("hidden")
						animes[0].classList.remove("hidden")
					}
					await sleep(4500)
					i++;
				}

				
			}
			ShowAnimes();
			var intAnimes = setInterval(ShowAnimes, animes.length*2250)
	}
	catch(e) {
	  console.log(`Variable NO existe, el error es: ${e.message}.`);
	}
	
	

	
</script>